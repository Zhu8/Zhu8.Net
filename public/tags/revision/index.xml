<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Revision on 猪八的网：浮生志</title>
    <link>https://zhu8.net/tags/revision/</link>
    <description>Recent content in Revision on 猪八的网：浮生志</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <copyright>Zhu8.Net 🚀 [&lt;a href=&#34;https://creativecommons.org/licenses/by-sa/4.0/deed.zh&#34;&gt;CC BY-SA&lt;/a&gt;]</copyright>
    <lastBuildDate>Sat, 21 May 2022 19:05:55 +0800</lastBuildDate>
    
	<atom:link href="https://zhu8.net/tags/revision/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>关闭WordPress的Revision功能</title>
      <link>https://zhu8.net/blog/2009/03/disable-wordpress-revision.html</link>
      <pubDate>Sat, 21 May 2022 19:05:55 +0800</pubDate>
      
      <guid>https://zhu8.net/blog/2009/03/disable-wordpress-revision.html</guid>
      <description>&lt;p&gt;还是使用 &lt;a href=&#34;http://wordpress.org&#34;&gt;WordPress&lt;/a&gt; 吧！。因为它的2.7实在是太诱人了。我从WP1.3开始用到现在，实在是太习惯和依赖了。虽然他有讨厌的Revision……&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;如何关闭Revision？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;我试用了几种方法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;第一种&lt;/strong&gt;：在 &lt;code&gt;wp-config.php&lt;/code&gt;中加入如下代码：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    define(&lt;span style=&#34;color:#d14&#34;&gt;&amp;#39;WP_POST_REVISIONS&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#099&#34;&gt;0&lt;/span&gt; ); 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    define(&lt;span style=&#34;color:#d14&#34;&gt;&amp;#39;AUTOSAVE_INTERVAL&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#099&#34;&gt;72000&lt;/span&gt; );
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;经测试，新建文章没有问题，似乎是可以关掉，但当你在修改已经发布的文章的时候，仍然在其作用。——&lt;strong&gt;放弃&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;第二种&lt;/strong&gt;：使用插件：&lt;a href=&#34;http://www.hostscope.com/wordpress-plugins/norevisions-wordpress-plugin/&#34; title=&#34;The No Revisions WordPress Plugin&#34;&gt;No Revisions&lt;/a&gt;，经测试可以使用。看了一下他的代码，很纯粹：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;&amp;lt;?&lt;/span&gt;php &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;@&lt;/span&gt;remove_action ( &lt;span style=&#34;color:#d14&#34;&gt;&amp;#39;pre_post_update&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#d14&#34;&gt;&amp;#39;wp_save_post_revision&amp;#39;&lt;/span&gt; ); &lt;span style=&#34;color:#999;font-weight:bold;font-style:italic&#34;&gt;?&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#a61717;background-color:#e3d2d2&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;——&lt;strong&gt;使用&lt;/strong&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;第三种&lt;/strong&gt;：如果你不想使用插件，可以参考这位老兄的&lt;a href=&#34;http://programmingnote.com/blog/?p=35&#34;&gt;修改方法&lt;/a&gt;。他说Comment掉第二条插件所使用的命令之后还要再加一句，但我测试，&lt;strong&gt;单纯用上面那个插件是没有问题的&lt;/strong&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;关于如何&lt;strong&gt;回收利用在你还没来得及关闭Revision功能之前就产生的Revisions&lt;/strong&gt;？&lt;/p&gt;
&lt;p&gt;对我这个完美主义来说，我是不能容忍一堆无用的数据在我的Mysql里面，所以你可以去你的数据库进行编辑一番：&lt;/p&gt;
&lt;p&gt;找到 &lt;em&gt;&lt;code&gt;post_type = “revision”&lt;/code&gt;&lt;/em&gt; 的文章，将其数值修改为你即将要张贴的文章，其中几个要点：将 &lt;em&gt;&lt;code&gt;post_status&lt;/code&gt;&lt;/em&gt; 从 &lt;em&gt;&lt;code&gt;inherit&lt;/code&gt;&lt;/em&gt; 改成 &lt;strong&gt;&lt;code&gt;publish&lt;/code&gt;&lt;/strong&gt; ，将 &lt;em&gt;&lt;code&gt;post_type&lt;/code&gt;&lt;/em&gt; 从 &lt;strong&gt;&lt;code&gt;revision&lt;/code&gt;&lt;/strong&gt; 改成 &lt;strong&gt;&lt;code&gt;post&lt;/code&gt;&lt;/strong&gt;，其它例如： &lt;em&gt;&lt;code&gt;post_name&lt;/code&gt;&lt;/em&gt; &lt;em&gt;&lt;code&gt;post_date&lt;/code&gt;&lt;/em&gt; 这些自己改好就行啦！&lt;/p&gt;
&lt;p&gt;然后你就可以在你的文章列表中看到咯！&lt;/p&gt;</description>
    </item>
    
  </channel>
</rss>