<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>个性化 on 猪八的网：浮生志</title><link>https://zhu8.net/tags/%E4%B8%AA%E6%80%A7%E5%8C%96/</link><description>Recent content in 个性化 on 猪八的网：浮生志</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>Zhu8.Net 🚀 [&lt;a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh">CC BY-SA&lt;/a>]</copyright><lastBuildDate>Mon, 30 Jun 2014 20:51:49 +0800</lastBuildDate><atom:link href="https://zhu8.net/tags/%E4%B8%AA%E6%80%A7%E5%8C%96/index.xml" rel="self" type="application/rss+xml"/><item><title>Typecho个性化常用代码</title><link>https://zhu8.net/blog/2014/06/typecho-personalize.html</link><pubDate>Mon, 30 Jun 2014 20:51:49 +0800</pubDate><guid>https://zhu8.net/blog/2014/06/typecho-personalize.html</guid><description>&lt;p>发觉自己真的老了，好多东西折腾不动了……一个网站模版和个性化，竟然每天就只能折腾一点点。遥想公瑾当年，一晚上不睡觉，整个网站页面就优化完毕了。&lt;img src="https://zhu8.net/images/posts/st1.png" alt="Typecho">&lt;/p>
&lt;p>网站以前用&lt;a href="http://www.movabletype.com">MT&lt;/a>，最喜欢的当然是静态化，虽然用的是3.X，但是能达到我的要求，就一直没有换。但是后来不知道为什么，反垃圾评论功能失效了……作为一个强迫症兼偏执狂，当然受不了这个，但是自己又没劲再去折腾了。于是，换到了&lt;a href="http://www.typecho.org">Typecho&lt;/a>，因为实在是不想用大众脸的&lt;a href="http://wordpress.org">WordPress&lt;/a>！&lt;/p>
&lt;p>诚如我&lt;a href="http://chenjun.com/2014/06/start.html">第一篇日志&lt;/a>所言，微博微信都是危险的，他让我们渐渐失去了长时间去思考的能力，适应了快餐文化，适应了随手点个赞。还是回到公开在互联网的个人网志，保存放心、安全，所有东西都归我管。当然，如果不是&lt;a href="http://www.blogger.com">Blogger&lt;/a>被&lt;strong>土啬女干&lt;/strong>了，我是愿意去那里安家的。&lt;/p>
&lt;p>好久没有废话了，那废话就说到这里吧，因为Typecho的官方文档还有很多不完善的地方，自己找以及在网上琢磨，为了方便也许只有一两个人能到的这里的友人们，下面就放一些常用的Typecho的代码吧。&lt;/p>
&lt;p>这里先放一个&lt;em>&lt;strong>列表&lt;/strong>&lt;/em>，详细的请进入&lt;strong>阅读全文&lt;/strong>。&lt;/p>
&lt;h3 id="归档页面模板">归档页面模板&lt;/h3>
&lt;p>（这里涉及到官方文档首段代码没有结尾，注意参考下面的第一段）&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-php" data-lang="php">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">&amp;lt;?&lt;/span>php
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#d14">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#d14"> * 归档页面模板
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#d14"> *
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#d14"> * @package custom
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#d14"> */&lt;/span>; &lt;span style="color:#999;font-weight:bold;font-style:italic">?&amp;gt;&lt;/span>&lt;span style="color:#a61717;background-color:#e3d2d2">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2">&amp;lt;?php $this-&amp;gt;need(&amp;#39;header.php&amp;#39;); ?&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> &amp;lt;div class=&amp;#34;col-mb-12 col-8&amp;#34; id=&amp;#34;main&amp;#34; role=&amp;#34;main&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> &amp;lt;h3 class=&amp;#34;archive-title&amp;#34;&amp;gt;日志归档&amp;lt;/h3&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2">&amp;lt;?php $this-&amp;gt;widget(&amp;#39;Widget_Contents_Post_Recent&amp;#39;, &amp;#39;pageSize=10000&amp;#39;)-&amp;gt;to($archives);
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> $year=0; $mon=0; $i=0; $j=0;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> $output = &amp;#39;&amp;lt;div id=&amp;#34;archives&amp;#34;&amp;gt;&amp;#39;;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> while($archives-&amp;gt;next()):
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> $year_tmp = date(&amp;#39;Y&amp;#39;,$archives-&amp;gt;created);
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> $mon_tmp = date(&amp;#39;m&amp;#39;,$archives-&amp;gt;created);
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> $y=$year; $m=$mon;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> if ($mon != $mon_tmp &amp;amp;&amp;amp; $mon &amp;gt; 0) $output .= &amp;#39;&amp;lt;/ul&amp;gt;&amp;lt;/li&amp;gt;&amp;#39;;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> if ($year != $year_tmp &amp;amp;&amp;amp; $year &amp;gt; 0) $output .= &amp;#39;&amp;lt;/ul&amp;gt;&amp;#39;;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> if ($year != $year_tmp) {
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> $year = $year_tmp;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> $output .= &amp;#39;&amp;lt;h3 class=&amp;#34;al_year&amp;#34;&amp;gt;&amp;#39;. $year .&amp;#39; 年&amp;lt;/h3&amp;gt;&amp;lt;ul class=&amp;#34;al_mon_list&amp;#34;&amp;gt;&amp;#39;; //输出年份
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> }
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> if ($mon != $mon_tmp) {
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> $mon = $mon_tmp;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> $output .= &amp;#39;&amp;lt;li&amp;gt;&amp;lt;span class=&amp;#34;al_mon&amp;#34;&amp;gt;&amp;#39;. $mon .&amp;#39; 月&amp;lt;/span&amp;gt;&amp;lt;ul class=&amp;#34;al_post_list&amp;#34;&amp;gt;&amp;#39;; //输出月份
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> }
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> $output .= &amp;#39;&amp;lt;li&amp;gt;&amp;#39;.date(&amp;#39;d日: &amp;#39;,$archives-&amp;gt;created).&amp;#39;&amp;lt;a href=&amp;#34;&amp;#39;.$archives-&amp;gt;permalink .&amp;#39;&amp;#34;&amp;gt;&amp;#39;. $archives-&amp;gt;title .&amp;#39;&amp;lt;/a&amp;gt; &amp;lt;em&amp;gt;(&amp;#39;. $archives-&amp;gt;commentsNum.&amp;#39;)&amp;lt;/em&amp;gt;&amp;lt;/li&amp;gt;&amp;#39;; //输出文章日期和标题
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> endwhile;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> $output .= &amp;#39;&amp;lt;/ul&amp;gt;&amp;lt;/li&amp;gt;&amp;lt;/ul&amp;gt;&amp;lt;/div&amp;gt;&amp;#39;;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> echo $output;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2">?&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> &amp;lt;/div&amp;gt;&amp;lt;!-- end #main --&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> &amp;lt;?php $this-&amp;gt;need(&amp;#39;sidebar.php&amp;#39;); ?&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> &amp;lt;?php $this-&amp;gt;need(&amp;#39;footer.php&amp;#39;); ?&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="获取分类描述">获取分类描述&lt;/h3>
&lt;p>&lt;code>&amp;lt;?php echo $this-&amp;gt;getDescription(); ?&amp;gt;&lt;/code>&lt;/p>
&lt;p>&lt;em>案例演示：&lt;/em>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-php" data-lang="php">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">&amp;lt;?&lt;/span>php &lt;span style="color:#008080">$this&lt;/span>&lt;span style="color:#000;font-weight:bold">-&amp;gt;&lt;/span>&lt;span style="color:#008080">widget&lt;/span>(&lt;span style="color:#d14">&amp;#39;Widget_Metas_Category_List&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">-&amp;gt;&lt;/span>&lt;span style="color:#008080">parse&lt;/span>(&lt;span style="color:#d14">&amp;#39;&amp;lt;li&amp;gt;&amp;lt;a href=&amp;#34;{permalink}&amp;#34; title=&amp;#34;{description}&amp;#34;&amp;gt;{name}&amp;lt;/a&amp;gt; ({count})&amp;lt;/li&amp;gt;&amp;#39;&lt;/span>); &lt;span style="color:#999;font-weight:bold;font-style:italic">?&amp;gt;&lt;/span>&lt;span style="color:#a61717;background-color:#e3d2d2">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="前后文章调用代码">前后文章调用代码&lt;/h3>
&lt;p>&lt;code>&amp;lt;?php $this-&amp;gt;thePrev(); ?&amp;gt; &amp;lt;?php $this-&amp;gt;theNext(); ?&amp;gt;&lt;/code>&lt;/p>
&lt;h3 id="随机颜色标签云">随机颜色标签云&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-php" data-lang="php">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">&amp;lt;?&lt;/span>php &lt;span style="color:#008080">$this&lt;/span>&lt;span style="color:#000;font-weight:bold">-&amp;gt;&lt;/span>&lt;span style="color:#008080">widget&lt;/span>(&lt;span style="color:#d14">&amp;#39;Widget_Metas_Tag_Cloud&amp;#39;&lt;/span>, &lt;span style="color:#d14">&amp;#39;ignoreZeroCount=1&amp;amp;limit=30&amp;#39;&lt;/span>)&lt;span style="color:#000;font-weight:bold">-&amp;gt;&lt;/span>&lt;span style="color:#008080">to&lt;/span>(&lt;span style="color:#008080">$tags&lt;/span>); &lt;span style="color:#999;font-weight:bold;font-style:italic">?&amp;gt;&lt;/span>&lt;span style="color:#a61717;background-color:#e3d2d2">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2">&amp;lt;ul class=&amp;#34;tags-list&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2">&amp;lt;?php while($tags-&amp;gt;next()): ?&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2"> &amp;lt;li&amp;gt;&amp;lt;a style=&amp;#34;color: rgb(&amp;lt;?php echo(rand(0, 255)); ?&amp;gt;, &amp;lt;?php echo(rand(0,255)); ?&amp;gt;, &amp;lt;?php echo(rand(0, 255)); ?&amp;gt;)&amp;#34; href=&amp;#34;&amp;lt;?php $tags-&amp;gt;permalink(); ?&amp;gt;&amp;#34; title=&amp;#39;&amp;lt;?php $tags-&amp;gt;name(); ?&amp;gt;&amp;#39;&amp;gt;&amp;lt;?php $tags-&amp;gt;name(); ?&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2">&amp;lt;?php endwhile; ?&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a61717;background-color:#e3d2d2">&amp;lt;/ul&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="返回网页顶部">返回网页顶部&lt;/h3>
&lt;p>在footer.php页面增加如下代码（可直接下载我的第二段JS代码，将其中的图片地址改成你自己定义的）：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-html" data-lang="html">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#998;font-style:italic">&amp;lt;!-- Start of Go-Top Code --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;&lt;span style="color:#000080">script&lt;/span> &lt;span style="color:#008080">type&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#d14">&amp;#34;text/javascript&amp;#34;&lt;/span> &lt;span style="color:#008080">src&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#d14">&amp;#34;http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js&amp;#34;&lt;/span>&amp;gt;&amp;lt;/&lt;span style="color:#000080">script&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;&lt;span style="color:#000080">script&lt;/span> &lt;span style="color:#008080">type&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#d14">&amp;#34;text/javascript&amp;#34;&lt;/span> &lt;span style="color:#008080">src&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#d14">&amp;#34;http://chenjun.com/usr/uploads/top.js&amp;#34;&lt;/span>&amp;gt;&amp;lt;/&lt;span style="color:#000080">script&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#998;font-style:italic">&amp;lt;!-- End of Go-Top Code --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="段落首行缩进两字符">段落首行缩进两字符&lt;/h3>
&lt;p>编辑Style.css文件，增加如下代码：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-css" data-lang="css">&lt;span style="display:flex;">&lt;span>.&lt;span style="color:#458;font-weight:bold">post-content&lt;/span> &lt;span style="color:#000080">p&lt;/span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">text-indent&lt;/span>: &lt;span style="color:#099">2&lt;/span>&lt;span style="color:#458;font-weight:bold">em&lt;/span>; &lt;span style="color:#998;font-style:italic">/*em是相对单位，2em即现在一个字大小的两倍*/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>后续待补充，部分参考：&lt;a href="http://docs.typecho.org">Typecho官方文档&lt;/a>以及&lt;a href="http://typecho.me">Typecho.me&lt;/a>，一并致谢！&lt;/p></description></item></channel></rss>