<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>GitInfo on çŒªå…«çš„ç½‘ï¼šæµ®ç”Ÿå¿—</title><link>https://zhu8.net/tags/gitinfo/</link><description>Recent content in GitInfo on çŒªå…«çš„ç½‘ï¼šæµ®ç”Ÿå¿—</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>Zhu8.Net ğŸš€ [&lt;a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh">CC BY-SA&lt;/a>]</copyright><lastBuildDate>Tue, 14 Jun 2022 14:56:10 +0800</lastBuildDate><atom:link href="https://zhu8.net/tags/gitinfo/index.xml" rel="self" type="application/rss+xml"/><item><title>ä¸ºHugoç«™ç‚¹æ¨¡æ¿æ·»åŠ GitInfoä¿¡æ¯</title><link>https://zhu8.net/blog/2022/06/add-gitinfo-to-hugo-theme.html</link><pubDate>Tue, 14 Jun 2022 14:56:10 +0800</pubDate><guid>https://zhu8.net/blog/2022/06/add-gitinfo-to-hugo-theme.html</guid><description>&lt;p>ä¸ºæœ¬ç«™çš„&lt;strong>Hugo&lt;/strong>çš„æ¨¡æ¿æ·»åŠ &lt;code>GitInfo&lt;/code>ä¿¡æ¯ï¼Œæ–¹ä¾¿ç¼–è¾‘ï¼Œå¹¶èƒ½å¤Ÿæ˜¾ç¤ºæœ€åç¼–è¾‘æ—¶é—´&lt;strong>LastMod&lt;/strong>ï¼Œå¯¹åº”çš„&lt;code>Commit&lt;/code>ä»¥åŠæ‰˜ç®¡åœ¨&lt;code>GitHub&lt;/code>ä¸Šé¢çš„&lt;code>MarkDown&lt;/code>æ–‡ä»¶çš„æºç ã€‚ä¸»è¦çš„å˜åŠ¨ï¼Œéœ€è¦åœ¨ä»¥ä¸‹å‡ ä¸ªæ–‡ä»¶ç€æ‰‹ï¼š&lt;/p>
&lt;h2 id="è®¾ç½®configtoml">è®¾ç½®&lt;code>config.toml&lt;/code>&lt;/h2>
&lt;p>åœ¨&lt;code>config.toml&lt;/code>æ–‡ä»¶é‡Œé¢ï¼Œæœ‰ä¸¤å¤„éœ€è¦ç¼–è¾‘çš„åœ°æ–¹:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å¯ç”¨&lt;code>GitInfo&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-toml" data-lang="toml">&lt;span style="display:flex;">&lt;span>enableGitInfo = &lt;span style="color:#000;font-weight:bold">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>åœ¨ params é‡Œé¢å¢åŠ ä»¥ä¸‹è¦ç´ å¤‡ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-toml" data-lang="toml">&lt;span style="display:flex;">&lt;span>[params]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> enableGitInfo = &lt;span style="color:#000;font-weight:bold">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> gitRepo = &lt;span style="color:#d14">&amp;#34;https://github.com/zhu8/zhu8.net&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#998;font-style:italic"># æ˜¯å¦å¼€å¯&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> enablePostGitInfo = &lt;span style="color:#000;font-weight:bold">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> displayPostGitInfo = &lt;span style="color:#000;font-weight:bold">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#998;font-style:italic"># è¯´æ˜ï¼šæ–‡ç« çš„ Front Matter ä¸­çš„ `gitinfo`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> repoURL = &lt;span style="color:#d14">&amp;#34;https://github.com/YOUR-USER-NAME/YOUR-REPO-NAME/blob/master&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> repoEditURL = &lt;span style="color:#d14">&amp;#34;https://github.com/YOUR-USER-NAME/YOUR-REPO-NAME/edit/master&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> displayRAW = &lt;span style="color:#000;font-weight:bold">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> RAWText = &lt;span style="color:#d14">&amp;#34;MkDn&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> displayEditLink = &lt;span style="color:#000;font-weight:bold">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> editText = &lt;span style="color:#d14">&amp;#34;Edit Me?&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ol>
&lt;h2 id="æ›´æ–°themesæ–‡ä»¶å¤¹">æ›´æ–°&lt;code>Themes&lt;/code>æ–‡ä»¶å¤¹&lt;/h2>
&lt;h3 id="ä¿®æ”¹htmlæ¨¡ç‰ˆ">ä¿®æ”¹&lt;code>HTML&lt;/code>æ¨¡ç‰ˆ&lt;/h3>
&lt;p>é¦–å…ˆéœ€è¦åœ¨ä½ çš„&lt;code>Themes&lt;/code>æ–‡ä»¶å¤¹é‡Œé¢ï¼Œå¢åŠ ä¸“å±æ¨¡ç‰ˆï¼š&lt;code>post-gitinfo.html&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-html" data-lang="html">&lt;span style="display:flex;">&lt;span>{{- $path := &amp;#34;&amp;#34; -}}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{{- with .File -}}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{- $path = .Path -}}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{{- else -}}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{- $path = .Path -}}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{{- end -}}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{{ if .GitInfo }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{ if and .Site.Params.enablePostGitInfo (.Params.gitinfo | default .Site.Params.displayPostGitInfo) }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{ if .Site.Params.displayEditLink }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{ if not .Lastmod.IsZero }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;&lt;span style="color:#000080">div&lt;/span> &lt;span style="color:#008080">id&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#d14">&amp;#34;gitinfo&amp;#34;&lt;/span> &lt;span style="color:#008080">class&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#d14">&amp;#34;a-gray text-sm text-gray-500 leading-tight pb-6&amp;#34;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{ with .Site.Params.repoEditURL }}{{ $contentDir := (cond $.Site.IsMultiLingual (printf `/%s/` $.Site.Params.contentDir) &amp;#34;/content/&amp;#34;) }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;&lt;span style="color:#000080">a&lt;/span> &lt;span style="color:#008080">href&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#d14">&amp;#34;{{ . }}{{ $contentDir }}{{ replace $path &amp;#34;&lt;/span>&lt;span style="color:#a61717;background-color:#e3d2d2">\\&amp;#34;&lt;/span> &lt;span style="color:#a61717;background-color:#e3d2d2">&amp;#34;/&amp;#34;&lt;/span> &lt;span style="color:#a61717;background-color:#e3d2d2">}}&amp;#34;&lt;/span> &lt;span style="color:#008080">target&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#d14">&amp;#34;_blank&amp;#34;&lt;/span> &lt;span style="color:#008080">rel&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#d14">&amp;#34;nofollow noopener noreferrer&amp;#34;&lt;/span> &lt;span style="color:#008080">title&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#d14">&amp;#34;Edit Markdown File (Self Use Only!)&amp;#34;&lt;/span>&amp;gt;&amp;lt;&lt;span style="color:#000080">i&lt;/span> &lt;span style="color:#008080">class&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#d14">&amp;#34;fas fa-pencil-alt&amp;#34;&lt;/span>&amp;gt;&amp;lt;/&lt;span style="color:#000080">i&lt;/span>&amp;gt;&amp;lt;/&lt;span style="color:#000080">a&lt;/span>&amp;gt;{{ end }}LastMod:&amp;lt;&lt;span style="color:#000080">em&lt;/span>&amp;gt;{{ .Page.Lastmod.Format &amp;#34;2006-01-02&amp;#34; }}&amp;lt;/&lt;span style="color:#000080">em&lt;/span>&amp;gt;&lt;span style="color:#800080">&amp;amp;nbsp;&lt;/span> {{ if .Site.Params.displayRAW }}{{ with .Site.Params.repoURL }}{{ $contentDir := (cond $.Site.IsMultiLingual (printf `/%s/` $.Site.Params.contentDir) &amp;#34;/content/&amp;#34;) }}[&amp;lt;&lt;span style="color:#000080">a&lt;/span> &lt;span style="color:#008080">href&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#d14">&amp;#34;{{ . }}{{ $contentDir }}{{ replace $path &amp;#34;&lt;/span>&lt;span style="color:#a61717;background-color:#e3d2d2">\\&amp;#34;&lt;/span> &lt;span style="color:#a61717;background-color:#e3d2d2">&amp;#34;/&amp;#34;&lt;/span> &lt;span style="color:#a61717;background-color:#e3d2d2">}}&amp;#34;&lt;/span> &lt;span style="color:#008080">target&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#d14">&amp;#34;_blank&amp;#34;&lt;/span> &lt;span style="color:#008080">rel&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#d14">&amp;#34;nofollow noopener noreferrer&amp;#34;&lt;/span> &lt;span style="color:#008080">title&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#d14">&amp;#34;RAW Post in Markdown File.&amp;#34;&lt;/span>&amp;gt;{{- $.Site.Params.RAWText -}}&amp;lt;/&lt;span style="color:#000080">a&lt;/span>&amp;gt;]{{ end }}{{ end }}{{- if $.Site.Params.gitRepo -}}{{- with $.GitInfo -}}[&amp;lt;&lt;span style="color:#000080">a&lt;/span> &lt;span style="color:#008080">class&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#d14">&amp;#34;git-hash&amp;#34;&lt;/span> &lt;span style="color:#008080">href&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#d14">&amp;#34;{{ printf `%v/commit/%v` $.Site.Params.gitRepo .Hash }}&amp;#34;&lt;/span> &lt;span style="color:#008080">target&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#d14">&amp;#34;_blank&amp;#34;&lt;/span> &lt;span style="color:#008080">title&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#d14">&amp;#34;Commit by {{ .AuthorName }}: {{ .Subject }}&amp;#34;&lt;/span>&amp;gt;&amp;lt;&lt;span style="color:#000080">i&lt;/span> &lt;span style="color:#008080">class&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#d14">&amp;#34;fas fa-hashtag fa-fw&amp;#34;&lt;/span>&amp;gt;&amp;lt;/&lt;span style="color:#000080">i&lt;/span>&amp;gt;{{- .AbbreviatedHash -}}&amp;lt;/&lt;span style="color:#000080">a&lt;/span>&amp;gt;]{{- end -}}{{- end -}}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;/&lt;span style="color:#000080">div&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{ end }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{ end }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {{ end }}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{{ end }}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åœ¨ä½ éœ€è¦çš„åœ°æ–¹ï¼Œè°ƒç”¨å®ƒå‡ºæ¥ï¼Œå¯èƒ½æ˜¯&lt;code>single.html&lt;/code>ï¼Œä¹Ÿå¯èƒ½æ˜¯å…¶ä»–çš„åˆ†æ¨¡ç‰ˆï¼Œæ¯”å¦‚æˆ‘çš„åœ¨ &lt;strong>partials&lt;/strong> ä¸‹çš„&lt;code>page-footer.html&lt;/code>æ¨¡ç‰ˆé‡Œï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-html" data-lang="html">&lt;span style="display:flex;">&lt;span>{{ partial &amp;#34;post-gitinfo.html&amp;#34; . }}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="å¢åŠ cssæ ‡è®°id">å¢åŠ &lt;code>CSS&lt;/code>æ ‡è®°&lt;code>ID&lt;/code>&lt;/h3>
&lt;p>ä¸ºäº†æ›´å¥½çš„è‡ªå®šä¹‰ï¼Œåœ¨ä¸Šè¿° HTML æ–‡æ¡£ä¸­ï¼Œå¢åŠ äº†ä¸€ä¸ª &lt;strong>DIV&lt;/strong> çš„ &lt;strong>ID&lt;/strong> å«åš&lt;code>gitinfo&lt;/code>ï¼Œä½ éœ€è¦åœ¨&lt;code>CSS&lt;/code>æ–‡ä»¶é‡Œé¢å®šä¹‰ä¸€ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-css" data-lang="css">&lt;span style="display:flex;">&lt;span>#&lt;span style="color:#555">gitinfo&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">padding-top&lt;/span>: &lt;span style="color:#099">3&lt;/span>&lt;span style="color:#458;font-weight:bold">px&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">float&lt;/span>: &lt;span style="color:#000;font-weight:bold">right&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">display&lt;/span>: &lt;span style="color:#000;font-weight:bold">inline-block&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="å‘ˆç°">å‘ˆç°&lt;/h2>
&lt;p>æœ€åï¼Œå°±å‘ˆç°å‡ºå¦‚æˆ‘æ–‡ç« æœ«å°¾å³ä¾§æ‰€ç°çš„&lt;strong>æ•ˆæœ&lt;/strong>å•¦ï¼Enjoy~~&lt;/p></description></item></channel></rss>